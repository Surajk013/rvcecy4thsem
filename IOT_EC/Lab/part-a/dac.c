#include<lpc214x.h>
#include<stdio.h>
#define ledon (IO0CLR = 1U << 31)
#define ledoff (IO0SET = 1U << 31)
#define PLOCK 0X00000400
#define SW2 (IO0PIN & (1 << 14))
#define SW3 (IO0PIN & (1 << 15))
#define SW4 (IO1PIN & (1 << 18))
#define SW5 (IO1PIN & (1 << 19))
#define SW6 (IO1PIN & (1 << 20))

void delayms(unsigned int j);

short int sin_val[]={
512+0,512+53,512+106,512+158,512+208,512+256,512+300,512+342,512+380,512+413,
512+442,512+467,512+486,512+503,512+510,512+511,
512+510,512+503,512+486,512+467,512+442,512+413,512+380,512+342,512+300,512+256,512+208,512+158,512+106,512+53,512+0,512-53,512-106,512-158,512-208,512-256,512-300,512-342,512-380,512-413,512-442,512-
467,512-486,512-503,512-510,512-511,
512-510,512-503,512-486,512-467,512-442,512-413,512-380,512-342,512-300,512-256,512-208,512-158,512-106,512-53
};
	
short int sin_rec[]={

	512+0,512+53,512+106,512+158,512+208,512+256,512+300,512+342,512+380,512+413,
512+442,512+467,512+486,512+503,512+510,512+511,
512+510,512+503,512+486,512+467,512+442,512+413,512+380,512+342,512+300,512+256,512+208,512+158,512+106,512+53,512+0

};


int main(){
	
	short int i,val=0;
	IO0DIR |= 1U << 31  | 0X000F0000;
	PINSEL1 |= 0X00080000;
	
	while(1){
		if(!SW2){
			if(i!=60){
				val=sin_val[i++];
				DACR=((1<<16)|(val<<6));
			}
			i=0;
		}
		else if(!SW3){
			if(i!=30){
				val=sin_val[i++];
				DACR=((1<<16)|(val<<6));
			}
			i=0;
		}
		else if(!SW4){
			val=0;
			while(val!=1023){
				DACR=((1<<16)|(val<<6));
				val++;
			}
			while(val!=0){
				DACR=((1<<16)|(val<<6));
				val--;
			}
		}
		else if(!SW5){
			val=0;
			while(val!=1023){
				DACR=((1<<16)|(val<<6));
				val++;
			}
		}
		else if(!SW6){
			val=1023;
			DACR=((1<<16)|(val<<6));
			delayms(10);
			val=0;
			DACR=((1<<16)|(val<<6));
			delayms(10);
		}
		else{
			val=1023;
			DACR=((1<<16)|(val<<6));
		}
	}

}

void delayms(unsigned int j){
	unsigned int i,x;
	for(i=0;i<j;i++){
		for(x=0;x<10000;x++);
	}
}